from odoo import fields, models

class ToolshubToolPlanFeatures(models.Model):
    _name = "toolshub.tool.plan.features"
    _description = "Model for Toolshub Tool plan features"

    # Fields
    name = fields.Char(string="Name", required=True)
    description = fields.Char(string="Description")
    plan_id = fields.Many2one(string="Plan", comodel_name="toolshub.tool.plans", ondelete="cascade", required=True, domain="[('tool_id', '=', tool_id)]")


    # SQL Constraints
    _sql_constraints = [
        ("unique_name", "unique(name, tool_id, plan_id)", "Name, Tool and the Plan of the feature should be unique."),
        ('name_not_null', 'CHECK(name IS NOT NULL AND name <> \'\')', 'Name cannot be null or empty.'),
        ('plain_id_not_null', 'CHECK(plan_id IS NOT NULL)', 'Plan must be set when creating Feature.'),
    ]